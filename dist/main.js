var e=Object.defineProperty,t=(t,n,o)=>(((t,n,o)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o})(t,"symbol"!=typeof n?n+"":n,o),o);const n={};
/*! js-cookie v3.0.1 | MIT */
function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var r=function e(t,n){function r(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=o({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var c in i)i[c]&&(l+="; "+c,!0!==i[c]&&(l+="="+i[c].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+l}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},r=0;r<n.length;r++){var i=n[r].split("="),l=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(o[c]=t.read(l,c),e===c)break}catch(s){}}return e?o[e]:o}},remove:function(e,t){r(e,"",o({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,o({},this.attributes,t))},withConverter:function(t){return e(o({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const i=BF2042Portal.Plugins.getPlugin("1650e7b6-3676-4858-8c9c-95b9381b7f8c");let l,c,s,a={},u=!0;function d(){_.info("Setting Base variables..."),l=_Blockly,c=l.getMainWorkspace(),s=_Blockly.getMainWorkspace().getBlocksByType("modBlock",!1)[0],a={},c.getToolbox().toolboxDef_.contents.forEach((e=>{"SEP"===e.kind||["SEARCH RESULTS","VARIABLES","SUBROUTINES","CONTROL ACTIONS"].includes(e.name)||e.contents.forEach((t=>{"LABEL"!==t.kind&&(e.name in a?a[e.name].push(t):a[e.name]=[t])}))})),s.setOnChange((function(e){e.type==l.Events.BLOCK_MOVE&&"ruleBlock"===c.getBlockById(e.blockId).type&&h()})),window.modBlock=s,window.allBlocks=a,window.testGRPC=g,window.listBlocksInModBlock=f,window.addPane=m,window.handelExperienceRulesListing=h}async function g(){(function(e,t,o){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in n)return;n[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(o)for(let n=r.length-1;n>=0;n--){const o=r[n];if(o.href===e&&(!t||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const l=document.createElement("link");return l.rel=t?"stylesheet":"modulepreload",t||(l.as="script",l.crossOrigin=""),l.href=e,document.head.appendChild(l),t?new Promise(((t,n)=>{l.addEventListener("load",t),l.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))})((()=>import("./assets/index.61722e7d.js")),[]).then((async e=>{var t,n,o,i,l,c;const s=new e.CommunityGamesClient("https://kingston-prod-wgw-envoy.ops.dice.se",null),a={"x-dice-tenancy":"prod_default-prod_default-kingston-common","x-gateway-session-id":r.get("sessionId"),"x-grpc-web":"1","x-user-agent":"grpc-web-javascript/0.1"},u=new e.communitygames.GetPlaygroundRequest;u.setPlaygroundid("0e2c9870-509b-11ed-af10-d3b271b3fd0a");const d=await s.getPlayground(u,a),g=null==(i=null==(o=null==(n=null==(t=d.getPlayground())?void 0:t.getOriginalplayground())?void 0:n.getModrules())?void 0:o.getCompatiblerules())?void 0:i.getRules();g instanceof Uint8Array&&console.log((new TextDecoder).decode(g));const _=null==(c=null==(l=d.getPlayground())?void 0:l.getOriginalplayground())?void 0:c.getName;console.log(_)}))}const _=new class{constructor(e="",n=!1){t(this,"pluginName"),t(this,"showPluginName"),this.pluginName=e,this.showPluginName=n}fancyLog(e,t){e&&console.log(`${this.showPluginName?`${this.pluginName} : `:""}%c${e}`,`color: ${t}`)}info(e){this.fancyLog(e,"#26FFDF")}warn(e){this.fancyLog(e,"#F26A1B")}critical(e){this.fancyLog(e,"#FF2C10")}}(i.manifest.name);async function f(){const e=[];let t=s.getChildren(!1)[0];for(;t;)e.push(t),t=t.nextConnection.targetBlock();return e}function p(e){!function(e){e.select();var t=c,n=e.getRelativeToSurfaceXY(),o=t.getMetrics();t.scrollbar.set(n.x*t.scale-o.contentLeft-o.viewWidth,n.y*t.scale-o.contentTop-.1*o.viewHeight)}(c.getBlockById(e))}function m(){_.info("Adding left plugin pannel");const e=$("<div></div>").load(i.getUrl("html/leftPluginPane.html"),(function(){$(".blocklyScrollbarHorizontal").after(e.html())}));var t;(t="#leftPluginPage",new Promise((e=>{if(document.querySelector(t))return e(document.querySelector(t));const n=new MutationObserver((o=>{document.querySelector(t)&&(e(document.querySelector(t)),n.disconnect())}));n.observe(document.body,{childList:!0,subtree:!0})}))).then((function(e){const t=$(":root");t.css("--leftPageMarginLeft",`${$(".blocklyToolboxDiv").width()}px`),t.css("--collapsed-rule-bg-image-url",`url(${i.getUrl("static/images/rule_collapsed_no_name.svg")})`),t.css("--left-arrow-svg-url",`url(${i.getUrl("static/images/left_arrow.svg")})`),_.info("Starting Rules list plugin..."),h()}))}function h(){const e=$(".collapsedRuleInnerContainer");e.length&&f().then((t=>{e.children(".collapsedRule").remove(),t.forEach(((t,n)=>{const o=$("<div>",{class:"collapsedRule","data-block-id":t.id}).append($("<div>").text(n+1)).append($("<div>").text(function(e){if("ruleBlock"===e.type)return e.inputList[0].fieldRow[1].getValue()}(t)));o.on("click touch",(function(){p(this.getAttribute("data-block-id"))})),o.appendTo(e)}))}))}function y(){_.info("loading searchWithCategory plugin...."),$("input.searchbar").remove().clone().appendTo("span.searchbarspan").on("keyup",(function(e){setTimeout((function(){const e=c.getToolbox(),t=e.getToolboxItems()[0],n=$("input.searchbar").val().trim();if(n.length){let o=[],r=[];for(const[e,t]of Object.entries(a)){r=[];const i={kind:"LABEL",text:e};r.push(i),t.forEach((e=>{e.displayName.toLowerCase().includes(n.toLowerCase())&&r.push(e)})),r.length>1&&(o=o.concat(r))}t.updateFlyoutContents(o),t.show(),e.setSelectedItem(t)}else t.hide()}))}))}function v(){var e;e="app-rules",new MutationObserver((function(e,t){for(const n of e)"childList"===n.type&&(document.getElementsByTagName("app-blockly").length?u||(_.warn("DOM recreated.... reloading plugins..."),d(),m(),y(),u=!0):u=!1)})).observe("string"==typeof e?$(e)[0]:e,{childList:!0,subtree:!0})}function b(){d(),_.info("\r\n\r\n   _____            _   _____  _             _           \r\n  / ____|          | | |  __ \\| |           (_)          \r\n | |     ___   ___ | | | |__) | |_   _  __ _ _ _ __  ___ \r\n | |    / _ \\ / _ \\| | |  ___/| | | | |/ _` | | '_ \\/ __|\r\n | |___| (_) | (_) | | | |    | | |_| | (_| | | | | \\__ \\\r\n  \\_____\\___/ \\___/|_| |_|    |_|\\__,_|\\__, |_|_| |_|___/\r\n                                        __/ |            \r\n                                       |___/             \r\n\n              Adding spice to your logic editor"),m(),_.info("coolness loaded"),y(),v(),window.cool_plugin_loaded=!0}!function(){if(void 0===window.jQuery){const e=document.createElement("script");e.src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js",e.type="text/javascript",e.addEventListener("load",(()=>{console.log(`jQuery ${$.fn.jquery} has been loaded successfully!`),b()})),document.head.appendChild(e)}else b()}();

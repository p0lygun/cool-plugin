var t=Object.defineProperty,e=(e,n,o)=>(((e,n,o)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o})(e,"symbol"!=typeof n?n+"":n,o),o);function n(t){!function(t){t.select();var e=window.mainWorkspace,n=t.getRelativeToSurfaceXY(),o=e.getMetrics();e.scrollbar.set(n.x*e.scale-o.contentLeft-o.viewWidth,n.y*e.scale-o.contentTop-.1*o.viewHeight)}(window.mainWorkspace.getBlockById(t))}function o(){const t=$(".collapsedRuleInnerContainer");t.length&&async function(){const t=[];let e=window.modBlock.getChildren(!1)[0];for(;e;)t.push(e),e=e.nextConnection.targetBlock();return t}().then((e=>{t.children(".collapsedRule").remove(),e.forEach(((e,o)=>{const r=$("<div>",{class:"collapsedRule","data-block-id":e.id}).append($("<div>").text(o+1)).append($("<div>").text(function(t){if("ruleBlock"===t.type)return t.inputList[0].fieldRow[1].getValue()}(e)));r.on("click touch",(function(){n(this.getAttribute("data-block-id"))})),r.appendTo(t)}))}))}function r(){function t(){s.info("Starting Rules list plugin..."),window.mainWorkspace.addChangeListener((function(t){if(t.type==window.Blockly.Events.BLOCK_MOVE){const e=window.mainWorkspace.getBlockById(t.blockId);e&&"ruleBlock"===e.type&&o()}})),o()}s.info("Adding left plugin pannel");const e=$("<div></div>").load(l.getUrl("html/leftPluginPane.html"),(function(){$(".blocklyScrollbarHorizontal").after(e.html())}));let n;var r;(r="#leftPluginPage",new Promise((t=>{if(document.querySelector(r))return t(document.querySelector(r));const e=new MutationObserver((n=>{document.querySelector(r)&&(t(document.querySelector(r)),e.disconnect())}));e.observe(document.body,{childList:!0,subtree:!0})}))).then((function(e){const o=$(":root");o.css("--leftPageMarginLeft",`${$(".blocklyToolboxDiv").width()}px`),o.css("--collapsed-rule-bg-image-url",`url(${l.getUrl("static/images/rule_collapsed_no_name.svg")})`),o.css("--left-arrow-svg-url",`url(${l.getUrl("static/images/left_arrow.svg")})`),t(),n=$("#leftPaneOpenIconContainer")})),window.addEventListener("flyout_show_event",(function(t){n&&n.hide(0)})),window.addEventListener("flyout_hide_event",(function(t){n&&n.show(0)}))}
/*! PlainDraggable v2.5.14 (c) anseki https://anseki.github.io/plain-draggable/ */
var i=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){n.r(e);var o,r=[],i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return clearTimeout(t)},l=Date.now();function s(){var t,e;o&&(a.call(window,o),o=null),r.forEach((function(e){var n;(n=e.event)&&(e.event=null,e.listener(n),t=!0)})),t?(l=Date.now(),e=!0):Date.now()-l<500&&(e=!0),e&&(o=i.call(window,s))}function c(t){var e=-1;return r.some((function(n,o){return n.listener===t&&(e=o,!0)})),e}var u=function(t){var e;return-1===c(t)?(r.push(e={listener:t}),function(t){e.event=t,o||s()}):null};function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var f=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){f=!0}}))}catch(ne){}function p(t,e,n,o){t.addEventListener(e,n,f?o:o.capture)}function h(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(t[n].identifier===e)return t[n];return null}function g(t){return t&&"number"==typeof t.clientX&&"number"==typeof t.clientY}function m(t){t.preventDefault()}var y=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startHandlers={},this.lastHandlerId=0,this.curPointerClass=null,this.curTouchId=null,this.lastPointerXY={clientX:0,clientY:0},this.lastTouchTime=0,this.options={preventDefault:!0,stopPropagation:!0},e&&["preventDefault","stopPropagation"].forEach((function(t){"boolean"==typeof e[t]&&(n.options[t]=e[t])}))}var e,n,o;return e=t,o=[{key:"addEventListenerWithOptions",get:function(){return p}}],(n=[{key:"regStartHandler",value:function(t){var e=this;return e.startHandlers[++e.lastHandlerId]=function(n){var o,r,i="mousedown"===n.type?"mouse":"touch",a=Date.now();if("touch"===i)e.lastTouchTime=a,o=n.changedTouches[0],r=n.changedTouches[0].identifier;else{if(a-e.lastTouchTime<400)return;o=n}if(!g(o))throw new Error("No clientX/clientY");e.curPointerClass&&e.cancel(),t.call(e,o)&&(e.curPointerClass=i,e.curTouchId="touch"===i?r:null,e.lastPointerXY.clientX=o.clientX,e.lastPointerXY.clientY=o.clientY,e.options.preventDefault&&n.preventDefault(),e.options.stopPropagation&&n.stopPropagation())},e.lastHandlerId}},{key:"unregStartHandler",value:function(t){delete this.startHandlers[t]}},{key:"addStartHandler",value:function(t,e){if(!this.startHandlers[e])throw new Error("Invalid handlerId: ".concat(e));return p(t,"mousedown",this.startHandlers[e],{capture:!1,passive:!1}),p(t,"touchstart",this.startHandlers[e],{capture:!1,passive:!1}),p(t,"dragstart",m,{capture:!1,passive:!1}),e}},{key:"removeStartHandler",value:function(t,e){if(!this.startHandlers[e])throw new Error("Invalid handlerId: ".concat(e));return t.removeEventListener("mousedown",this.startHandlers[e],!1),t.removeEventListener("touchstart",this.startHandlers[e],!1),t.removeEventListener("dragstart",m,!1),e}},{key:"addMoveHandler",value:function(t,e){var n=this,o=u((function(t){var e="mousemove"===t.type?"mouse":"touch";if("touch"===e&&(n.lastTouchTime=Date.now()),e===n.curPointerClass){var o="touch"===e?h(t.changedTouches,n.curTouchId):t;g(o)&&(o.clientX===n.lastPointerXY.clientX&&o.clientY===n.lastPointerXY.clientY||n.move(o),n.options.preventDefault&&t.preventDefault(),n.options.stopPropagation&&t.stopPropagation())}}));p(t,"mousemove",o,{capture:!1,passive:!1}),p(t,"touchmove",o,{capture:!1,passive:!1}),n.curMoveHandler=e}},{key:"move",value:function(t){g(t)&&(this.lastPointerXY.clientX=t.clientX,this.lastPointerXY.clientY=t.clientY),this.curMoveHandler&&this.curMoveHandler(this.lastPointerXY)}},{key:"addEndHandler",value:function(t,e){var n=this;function o(t){var e="mouseup"===t.type?"mouse":"touch";if("touch"===e&&(n.lastTouchTime=Date.now()),e===n.curPointerClass){var o="touch"===e?h(t.changedTouches,n.curTouchId)||(h(t.touches,n.curTouchId)?null:{}):t;o&&(n.end(o),n.options.preventDefault&&t.preventDefault(),n.options.stopPropagation&&t.stopPropagation())}}p(t,"mouseup",o,{capture:!1,passive:!1}),p(t,"touchend",o,{capture:!1,passive:!1}),n.curEndHandler=e}},{key:"end",value:function(t){g(t)&&(this.lastPointerXY.clientX=t.clientX,this.lastPointerXY.clientY=t.clientY),this.curEndHandler&&this.curEndHandler(this.lastPointerXY),this.curPointerClass=this.curTouchId=null}},{key:"addCancelHandler",value:function(t,e){var n=this;p(t,"touchcancel",(function(t){n.lastTouchTime=Date.now(),null!=n.curPointerClass&&(h(t.changedTouches,n.curTouchId)||!h(t.touches,n.curTouchId))&&n.cancel()}),{capture:!1,passive:!1}),n.curCancelHandler=e}},{key:"cancel",value:function(){this.curCancelHandler&&this.curCancelHandler(),this.curPointerClass=this.curTouchId=null}}])&&d(e.prototype,n),o&&d(e,o),t}();function v(t){return t.substr(0,1).toUpperCase()+t.substr(1)}var w,x,b,S,_=["webkit","moz","ms","o"],E=_.reduce((function(t,e){return t.push(e),t.push(v(e)),t}),[]),B=_.map((function(t){return"-".concat(t,"-")})),T=function(){return S=S||document.createElement("div").style},C=(x=new RegExp("^(?:"+_.join("|")+")(.)","i"),b=/[A-Z]/,function(t){return"float"===(t=(t+"").replace(/\s/g,"").replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()})).replace(x,(function(t,e){return b.test(e)?e.toLowerCase():t}))).toLowerCase()?"cssFloat":t}),k=(w=new RegExp("^(?:"+B.join("|")+")","i"),function(t){return(null!=t?t+"":"").replace(/\s/g,"").replace(w,"")}),O=function(t,e){var n=T();return t=t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),n.setProperty(t,e),null!=n[t]&&n.getPropertyValue(t)===e},P={},L={};function I(t){if((t=C(t))&&null==P[t]){var e=T();if(null!=e[t])P[t]=t;else{var n=v(t);E.some((function(o){var r=o+n;return null!=e[r]&&(P[t]=r,!0)}))||(P[t]=!1)}}return P[t]||void 0}var H={getName:I,getValue:function(t,e){var n;return(t=I(t))?(L[t]=L[t]||{},(Array.isArray(e)?e:[e]).some((function(e){return e=k(e),null!=L[t][e]?!1!==L[t][e]&&(n=L[t][e],!0):O(t,e)?(n=L[t][e]=e,!0):!!B.some((function(o){var r=o+e;return!!O(t,r)&&(n=L[t][e]=r,!0)}))||(L[t][e]=!1,!1)})),"string"==typeof n?n:void 0):n}};function A(t){return(t+"").trim()}function D(t,e){e.setAttribute("class",t.join(" "))}function F(t,e,n){n.filter((function(e){return!(!(e=A(e))||-1!==t.indexOf(e)||(t.push(e),0))})).length&&D(t,e)}function M(t,e,n){n.filter((function(e){var n;return!(!(e=A(e))||-1===(n=t.indexOf(e))||(t.splice(n,1),0))})).length&&D(t,e)}function W(t){return!W.ignoreNative&&t.classList||(e=(t.getAttribute("class")||"").trim().split(/\s+/).filter((function(t){return!!t})),n={length:e.length,item:function(t){return e[t]},contains:function(t){return-1!==e.indexOf(A(t))},add:function(){return F(e,t,Array.prototype.slice.call(arguments)),W.methodChain?n:void 0},remove:function(){return M(e,t,Array.prototype.slice.call(arguments)),W.methodChain?n:void 0},toggle:function(n,o){return i=t,a=n,l=o,-1!==(s=(r=e).indexOf(a=A(a)))?!!l||(r.splice(s,1),D(r,i),!1):!1!==l&&(r.push(a),D(r,i),!0);var r,i,a,l,s},replace:function(o,r){return i=e,a=t,s=r,(l=A(l=o))&&(s=A(s))&&l!==s&&-1!==(c=i.indexOf(l))&&(i.splice(c,1),-1===i.indexOf(s)&&i.push(s),D(i,a)),W.methodChain?n:void 0;var i,a,l,s,c}});var e,n}W.methodChain=!0;var X=W;function Y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}X.ignoreNative=!0;var R,$,N,z,V,U,G,q,Z,Q,K,J,tt,et=["tl","tr","bl","br"],nt=["start","end"],ot=["inside","outside"],rt=[40,200,1e3],it=[100,40,0],at="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,lt=!at&&!!document.uniqueID,st="MozAppearance"in document.documentElement.style,ct=!(at||st||!window.chrome||!window.CSS),ut=!(at||lt||st||ct||window.chrome||!("WebkitAppearance"in document.documentElement.style)),dt=(R={}.toString,$={}.hasOwnProperty.toString,N=$.call(Object),function(t){var e,n;return t&&"[object Object]"===R.call(t)&&(!(e=Object.getPrototypeOf(t))||(n=e.hasOwnProperty("constructor")&&e.constructor)&&"function"==typeof n&&$.call(n)===N)}),ft=Number.isFinite||function(t){return"number"==typeof t&&window.isFinite(t)},pt={},ht={},gt=new y,mt=0,yt=ut?["all-scroll","move"]:["grab","all-scroll","move"],vt=ut?"move":["grabbing","move"],wt="plain-draggable",xt="plain-draggable-dragging",bt="plain-draggable-moving",St={},_t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},Et=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return clearTimeout(t)};{let t=function(){var t=Date.now();["x","y"].forEach((function(e){var n=kt[e];if(n){var o=t-n.lastFrameTime,r=Tt(Bt,e),i=null!=n.lastValue&&Math.abs(n.lastValue-r)<10?n.lastValue:r;if(-1===n.dir?i>n.min:i<n.max){var a=i+n.speed*o*n.dir;a<n.min?a=n.min:a>n.max&&(a=n.max),Tt(Bt,e,a),n.lastValue=a}n.lastFrameTime=t}}))},e=function(){Et.call(window,Ct),t(),Ct=_t.call(window,e)};var Bt,Tt,Ct,kt={};St.move=function(n,o,r){Et.call(window,Ct),t(),Bt===n&&(o.x&&kt.x&&(o.x.lastValue=kt.x.lastValue),o.y&&kt.y&&(o.y.lastValue=kt.y.lastValue)),Bt=n,kt=o,Tt=r;var i=Date.now();["x","y"].forEach((function(t){var e=kt[t];e&&(e.lastFrameTime=i)})),Ct=_t.call(window,e)},St.stop=function(){Et.call(window,Ct),t(),kt={},Bt=null}}function Ot(t,e,n){return null!=n&&("x"===e?t.scrollTo(n,t.pageYOffset):t.scrollTo(t.pageXOffset,n)),"x"===e?t.pageXOffset:t.pageYOffset}function Pt(t,e,n){var o="x"===e?"scrollLeft":"scrollTop";return null!=n&&(t[o]=n),t[o]}function Lt(t){return t?dt(t)?Object.keys(t).reduce((function(e,n){return e[n]=Lt(t[n]),e}),{}):Array.isArray(t)?t.map(Lt):t:t}function It(t,e){var n,o;return j(t)!==j(e)||(n=dt(t)?"obj":Array.isArray(t)?"array":"")!=(dt(e)?"obj":Array.isArray(e)?"array":"")||("obj"===n?It(o=Object.keys(t).sort(),Object.keys(e).sort())||o.some((function(n){return It(t[n],e[n])})):"array"===n?t.length!==e.length||t.some((function(t,n){return It(t,e[n])})):t!==e)}function Ht(t){return!(!t||t.nodeType!==Node.ELEMENT_NODE||"function"!=typeof t.getBoundingClientRect||t.compareDocumentPosition(document)&Node.DOCUMENT_POSITION_DISCONNECTED)}function At(t){if(!dt(t))return null;var e;if(!ft(e=t.left)&&!ft(e=t.x))return null;if(t.left=t.x=e,!ft(e=t.top)&&!ft(e=t.y))return null;if(t.top=t.y=e,ft(t.width)&&t.width>=0)t.right=t.left+t.width;else{if(!(ft(t.right)&&t.right>=t.left))return null;t.width=t.right-t.left}if(ft(t.height)&&t.height>=0)t.bottom=t.top+t.height;else{if(!(ft(t.bottom)&&t.bottom>=t.top))return null;t.height=t.bottom-t.top}return t}function Dt(t){return ft(t)?{value:t,isRatio:!1}:"string"==typeof t?(e=t.replace(/\s/g,""),(r=/^(.+?)(%)?$/.exec(e))&&ft(n=parseFloat(r[1]))?{value:(o=!(!r[2]||!n))?n/100:n,isRatio:o}:null):null;var e,n,o,r}function Ft(t){return t.isRatio?"".concat(100*t.value,"%"):t.value}function Mt(t,e,n){return"number"==typeof t?t:e+t.value*(t.isRatio?n:1)}function Wt(t){if(!dt(t))return null;var e;if(!(e=Dt(t.left))&&!(e=Dt(t.x)))return null;if(t.left=t.x=e,!(e=Dt(t.top))&&!(e=Dt(t.y)))return null;if(t.top=t.y=e,(e=Dt(t.width))&&e.value>=0)t.width=e,delete t.right;else{if(!(e=Dt(t.right)))return null;t.right=e,delete t.width}if((e=Dt(t.height))&&e.value>=0)t.height=e,delete t.bottom;else{if(!(e=Dt(t.bottom)))return null;t.bottom=e,delete t.height}return t}function Xt(t){return Object.keys(t).reduce((function(e,n){return e[n]=Ft(t[n]),e}),{})}function Yt(t,e){var n={left:"x",right:"x",x:"x",width:"x",top:"y",bottom:"y",y:"y",height:"y"},o={x:e.left,y:e.top},r={x:e.width,y:e.height};return At(Object.keys(t).reduce((function(e,i){return e[i]=Mt(t[i],"width"===i||"height"===i?0:o[n[i]],r[n[i]]),e}),{}))}function jt(t,e){var n=t.getBoundingClientRect(),o={left:n.left,top:n.top,width:n.width,height:n.height};if(o.left+=window.pageXOffset,o.top+=window.pageYOffset,e){var r=window.getComputedStyle(t,""),i=parseFloat(r.borderTopWidth)||0,a=parseFloat(r.borderRightWidth)||0,l=parseFloat(r.borderBottomWidth)||0,s=parseFloat(r.borderLeftWidth)||0;o.left+=s,o.top+=i,o.width-=s+a,o.height-=i+l}return At(o)}function Rt(t,e){null==G&&(!1!==yt&&(G=H.getValue("cursor",yt)),null==G&&(G=!1)),t.style.cursor=!1===G?e:G}function $t(t){null==q&&(!1!==vt&&(q=H.getValue("cursor",vt)),null==q&&(q=!1)),!1!==q&&(t.style.cursor=q)}function Nt(t,e,n){var o=t.svgPoint;return o.x=e,o.y=n,o.matrixTransform(t.svgCtmElement.getScreenCTM().inverse())}function zt(t,e){var n=t.elementBBox;if(e.left!==n.left||e.top!==n.top){var o=t.htmlOffset;return t.elementStyle[K]="translate(".concat(e.left+o.left,"px, ").concat(e.top+o.top,"px)"),!0}return!1}function Vt(t,e){var n=t.elementBBox,o=t.elementStyle,r=t.htmlOffset,i=!1;return e.left!==n.left&&(o.left=e.left+r.left+"px",i=!0),e.top!==n.top&&(o.top=e.top+r.top+"px",i=!0),i}function Ut(t,e){var n=t.elementBBox;if(e.left!==n.left||e.top!==n.top){var o=t.svgOffset,r=t.svgOriginBBox,i=Nt(t,e.left-window.pageXOffset,e.top-window.pageYOffset);return t.svgTransform.setTranslate(i.x+o.x-r.x,i.y+o.y-r.y),!0}return!1}function Gt(t,e,n){var o=t.elementBBox;function r(){t.minLeft>=t.maxLeft?e.left=o.left:e.left<t.minLeft?e.left=t.minLeft:e.left>t.maxLeft&&(e.left=t.maxLeft),t.minTop>=t.maxTop?e.top=o.top:e.top<t.minTop?e.top=t.minTop:e.top>t.maxTop&&(e.top=t.maxTop)}if(r(),n){if(!1===n(e))return!1;r()}var i=t.moveElm(t,e);return i&&(t.elementBBox=At({left:e.left,top:e.top,width:o.width,height:o.height})),i}function qt(t){var e=t.element,n=t.elementStyle,o=jt(e),r=["display","marginTop","marginBottom","width","height"];r.unshift(K);var i=n[Q];n[Q]="none";var a=jt(e);t.orgStyle?r.forEach((function(e){null!=t.lastStyle[e]&&n[e]!==t.lastStyle[e]||(n[e]=t.orgStyle[e])})):(t.orgStyle=r.reduce((function(t,e){return t[e]=n[e]||"",t}),{}),t.lastStyle={});var l=jt(e),s=window.getComputedStyle(e,"");"inline"===s.display&&(n.display="inline-block",["Top","Bottom"].forEach((function(t){var e=parseFloat(s["padding".concat(t)]);n["margin".concat(t)]=e?"-".concat(e,"px"):"0"}))),n[K]="translate(0, 0)";var c=jt(e),u=t.htmlOffset={left:c.left?-c.left:0,top:c.top?-c.top:0};return n[K]="translate(".concat(o.left+u.left,"px, ").concat(o.top+u.top,"px)"),["width","height"].forEach((function(o){c[o]!==l[o]&&(n[o]=l[o]+"px",(c=jt(e))[o]!==l[o]&&(n[o]=l[o]-(c[o]-l[o])+"px")),t.lastStyle[o]=n[o]})),e.offsetWidth,n[Q]=i,a.left===o.left&&a.top===o.top||(n[K]="translate(".concat(a.left+u.left,"px, ").concat(a.top+u.top,"px)")),a}function Zt(t){var e=t.element,n=t.elementStyle,o=jt(e),r=["position","marginTop","marginRight","marginBottom","marginLeft","width","height"],i=n[Q];n[Q]="none";var a=jt(e);t.orgStyle?r.forEach((function(e){null!=t.lastStyle[e]&&n[e]!==t.lastStyle[e]||(n[e]=t.orgStyle[e])})):(t.orgStyle=r.reduce((function(t,e){return t[e]=n[e]||"",t}),{}),t.lastStyle={});var l=jt(e);n.position="absolute",n.left=n.top=n.margin="0";var s=jt(e),c=t.htmlOffset={left:s.left?-s.left:0,top:s.top?-s.top:0};return n.left=o.left+c.left+"px",n.top=o.top+c.top+"px",["width","height"].forEach((function(o){s[o]!==l[o]&&(n[o]=l[o]+"px",(s=jt(e))[o]!==l[o]&&(n[o]=l[o]-(s[o]-l[o])+"px")),t.lastStyle[o]=n[o]})),e.offsetWidth,n[Q]=i,a.left===o.left&&a.top===o.top||(n.left=a.left+c.left+"px",n.top=a.top+c.top+"px"),a}function Qt(t){var e=t.element,n=t.svgTransform,o=e.getBoundingClientRect(),r=jt(e);n.setTranslate(0,0);var i=t.svgOriginBBox=e.getBBox(),a=e.getBoundingClientRect(),l=Nt(t,a.left,a.top),s=t.svgOffset={x:i.x-l.x,y:i.y-l.y},c=Nt(t,o.left,o.top);return n.setTranslate(c.x+s.x-i.x,c.y+s.y-i.y),r}function Kt(t,e){var n=jt(document.documentElement),o=t.elementBBox=t.initElm(t),r=t.containmentBBox=t.containmentIsBBox?Yt(t.options.containment,n)||n:jt(t.options.containment,!0);if(t.minLeft=r.left,t.maxLeft=r.right-o.width,t.minTop=r.top,t.maxTop=r.bottom-o.height,Gt(t,{left:o.left,top:o.top}),t.parsedSnapTargets){var i={x:o.width,y:o.height},a={x:t.minLeft,y:t.minTop},l={x:t.maxLeft,y:t.maxTop},s={left:"x",right:"x",x:"x",width:"x",xStart:"x",xEnd:"x",xStep:"x",top:"y",bottom:"y",y:"y",height:"y",yStart:"y",yEnd:"y",yStep:"y"},c=t.parsedSnapTargets.reduce((function(t,e){var c,u="containment"===e.base?r:n,d={x:u.left,y:u.top},f={x:u.width,y:u.height};function p(n){if(null==n.center&&(n.center=e.center),null==n.xGravity&&(n.xGravity=e.gravity),null==n.yGravity&&(n.yGravity=e.gravity),null!=n.x&&null!=n.y)n.x=Mt(n.x,d.x,f.x),n.y=Mt(n.y,d.y,f.y),n.center&&(n.x-=i.x/2,n.y-=i.y/2,n.corners=["tl"]),(n.corners||e.corners).forEach((function(e){var o=n.x-("tr"===e||"br"===e?i.x:0),r=n.y-("bl"===e||"br"===e?i.y:0);if(o>=a.x&&o<=l.x&&r>=a.y&&r<=l.y){var s={x:o,y:r},c=o-n.xGravity,u=o+n.xGravity,d=r-n.yGravity,f=r+n.yGravity;c>a.x&&(s.gravityXStart=c),u<l.x&&(s.gravityXEnd=u),d>a.y&&(s.gravityYStart=d),f<l.y&&(s.gravityYEnd=f),t.push(s)}}));else{var o=null!=n.x?"x":"y",r="x"===o?"y":"x",s="".concat(r,"Start"),c="".concat(r,"End"),u="".concat(o,"Gravity"),p=o.toUpperCase(),h=r.toUpperCase(),g="gravity".concat(p,"Start"),m="gravity".concat(p,"End"),y="gravity".concat(h,"Start"),v="gravity".concat(h,"End");if(n[o]=Mt(n[o],d[o],f[o]),n[s]=Mt(n[s],d[r],f[r]),n[c]=Mt(n[c],d[r],f[r])-i[r],n[s]>n[c]||n[s]>l[r]||n[c]<a[r])return;n.center&&(n[o]-=i[o]/2,n.sides=["start"]),(n.sides||e.sides).forEach((function(e){var d=n[o]-("end"===e?i[o]:0);if(d>=a[o]&&d<=l[o]){var f={},p=d-n[u],h=d+n[u];f[o]=d,p>a[o]&&(f[g]=p),h<l[o]&&(f[m]=h),n[s]>a[r]&&(f[y]=n[s]),n[c]<l[r]&&(f[v]=n[c]),t.push(f)}}))}}if((c=e.element?jt(e.element):null)||e.ppBBox)e.ppBBox&&(c=Yt(e.ppBBox,u)),c&&e.edges.forEach((function(t){var n=e.gravity,r=e.gravity;"outside"===t&&(n+=o.width,r+=o.height);var i=c.left-n,a=c.right+n,l=c.top-r,s=c.bottom+r,u="inside"===t?"start":"end";p({xStart:i,xEnd:a,y:c.top,sides:[u],center:!1}),p({x:c.left,yStart:l,yEnd:s,sides:[u],center:!1}),u="inside"===t?"end":"start",p({xStart:i,xEnd:a,y:c.bottom,sides:[u],center:!1}),p({x:c.right,yStart:l,yEnd:s,sides:[u],center:!1})}));else{var h=[["x","y","xStart","xEnd","xStep","yStart","yEnd","yStep"].reduce((function(t,n){return e[n]&&(t[n]=Mt(e[n],"xStep"===n||"yStep"===n?0:d[s[n]],f[s[n]])),t}),{})];["x","y"].forEach((function(t){var n="".concat(t,"Start"),o="".concat(t,"End"),r="".concat(t,"Step"),i="".concat(t,"Gravity");h=h.reduce((function(a,l){var s=l[n],c=l[o],u=l[r];if(null!=s&&null!=c&&s>=c)return a;if(null!=u){if(u<2)return a;var d=u/2;d=e.gravity>d?d:null;for(var f=s;f<=c;f+=u){var p=Object.keys(l).reduce((function(t,e){return e!==n&&e!==o&&e!==r&&(t[e]=l[e]),t}),{});p[t]=f,p[i]=d,a.push(p)}}else a.push(l);return a}),[])})),h.forEach((function(t){p(t)}))}return t}),[]);t.snapTargets=c.length?c:null}var u={},d=t.options.autoScroll;if(d){u.isWindow=d.target===window,u.target=d.target;var f="scroll"===e,p=function(t,e,n){var o,r,i,a,l={};a=e?document.documentElement:t,l.clientWidth=a.clientWidth,l.clientHeight=a.clientHeight;var s,c,u,d=0,f=0;return n||(e?(s=Ot(t,"x"),c=Ot(t,"y"),o=getComputedStyle(document.documentElement,""),r=getComputedStyle(document.body,""),d=Ot(t,"x",document.documentElement.scrollWidth+l.clientWidth+["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].reduce((function(t,e){return t+(parseFloat(o[e])||0)+(parseFloat(r[e])||0)}),0)),f=Ot(t,"y",document.documentElement.scrollHeight+l.clientHeight+["marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].reduce((function(t,e){return t+(parseFloat(o[e])||0)+(parseFloat(r[e])||0)}),0)),Ot(t,"x",s),Ot(t,"y",c)):(s=Pt(t,"x"),c=Pt(t,"y"),i=getComputedStyle(t,""),d=Pt(t,"x",t.scrollWidth+l.clientWidth+["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].reduce((function(t,e){return t+(parseFloat(i[e])||0)}),0)),f=Pt(t,"y",t.scrollHeight+l.clientHeight+["marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].reduce((function(t,e){return t+(parseFloat(i[e])||0)}),0)),Pt(t,"x",s),Pt(t,"y",c))),l.scrollWidth=l.clientWidth+d,l.scrollHeight=l.clientHeight+f,e?l.clientX=l.clientY=0:(u=t.getBoundingClientRect(),i||(i=getComputedStyle(t,"")),l.clientX=u.left+(parseFloat(i.borderLeftWidth)||0),l.clientY=u.top+(parseFloat(i.borderTopWidth)||0)),l}(d.target,u.isWindow,f),h=At({left:p.clientX,top:p.clientY,width:p.clientWidth,height:p.clientHeight});f?t.autoScroll&&(u.scrollWidth=t.autoScroll.scrollWidth,u.scrollHeight=t.autoScroll.scrollHeight):(u.scrollWidth=p.scrollWidth,u.scrollHeight=p.scrollHeight),[["X","Width","left","right"],["Y","Height","top","bottom"]].forEach((function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=(u["scroll".concat(n)]||0)-p["client".concat(n)],l=d["min".concat(e)]||0,s=ft(d["max".concat(e)])?d["max".concat(e)]:a;if(l<s&&l<a){s>a&&(s=a);for(var c=[],f=o[n.toLowerCase()],g=d.sensitivity.length-1;g>=0;g--){var m=d.sensitivity[g],y=d.speed[g];c.push({dir:-1,speed:y,position:h[r]+m}),c.push({dir:1,speed:y,position:h[i]-m-f})}u[e.toLowerCase()]={min:l,max:s,lines:c}}}))}t.autoScroll=u.x||u.y?u:null}function Jt(t){St.stop(),Rt(t.options.handle,t.orgCursor),U.style.cursor=Z,!1!==t.options.zIndex&&(t.elementStyle.zIndex=t.orgZIndex),J&&(U.style[J]=tt);var e=X(t.element);bt&&e.remove(bt),xt&&e.remove(xt),z=null,gt.cancel(),t.onDragEnd&&t.onDragEnd({left:t.elementBBox.left,top:t.elementBBox.top})}function te(t,e){var n,o,r=t.options;function i(t,e){function n(t){return"string"==typeof t?t.replace(/[, ]+/g," ").trim().toLowerCase():null}ft(e.gravity)&&e.gravity>0&&(t.gravity=e.gravity);var o=n(e.corner);if(o){if("all"!==o){var r={},i=o.split(/\s/).reduce((function(t,e){return(e="tl"===(e=e.trim().replace(/^(.).*?-(.).*$/,"$1$2"))||"lt"===e?"tl":"tr"===e||"rt"===e?"tr":"bl"===e||"lb"===e?"bl":"br"===e||"rb"===e?"br":null)&&!r[e]&&(t.push(e),r[e]=!0),t}),[]),a=i.length;o=a?4===a?"all":i.join(" "):null}o&&(t.corner=o)}var l=n(e.side);l&&("start"===l||"end"===l||"both"===l?t.side=l:"start end"!==l&&"end start"!==l||(t.side="both")),"boolean"==typeof e.center&&(t.center=e.center);var s=n(e.edge);s&&("inside"===s||"outside"===s||"both"===s?t.edge=s:"inside outside"!==s&&"outside inside"!==s||(t.edge="both"));var c="string"==typeof e.base?e.base.trim().toLowerCase():null;return!c||"containment"!==c&&"document"!==c||(t.base=c),t}if(e.containment&&(Ht(e.containment)?e.containment!==r.containment&&(r.containment=e.containment,t.containmentIsBBox=!1,n=!0):(o=Wt(Lt(e.containment)))&&It(o,r.containment)&&(r.containment=o,t.containmentIsBBox=!0,n=!0)),null!=e.snap){var a=dt(e.snap)&&null!=e.snap.targets?e.snap:{targets:e.snap},l=[],s=i({targets:l},a);s.gravity||(s.gravity=20),s.corner||(s.corner="tl"),s.side||(s.side="both"),"boolean"!=typeof s.center&&(s.center=!1),s.edge||(s.edge="both"),s.base||(s.base="containment");var c=(Array.isArray(a.targets)?a.targets:[a.targets]).reduce((function(t,e){if(null==e)return t;var n,o=Ht(e),r=Wt(Lt(e)),a=o||r?{boundingBox:e}:dt(e)&&null==e.start&&null==e.end&&null==e.step?e:{x:e,y:e},c=[],u={},d=a.boundingBox;if(o||Ht(d))c.push({element:d}),u.boundingBox=d;else if(n=r||Wt(Lt(d)))c.push({ppBBox:n}),u.boundingBox=Xt(n);else{var f,p=["x","y"].reduce((function(t,e){var n,o,r,i,l=a[e];return(n=Dt(l))?(t[e]=n,u[e]=Ft(n)):(dt(l)&&(o=Dt(l.start),r=Dt(l.end),i=Dt(l.step),o&&r&&o.isRatio===r.isRatio&&o.value>=r.value&&(f=!0)),o=t["".concat(e,"Start")]=o||{value:0,isRatio:!1},r=t["".concat(e,"End")]=r||{value:1,isRatio:!0},u[e]={start:Ft(o),end:Ft(r)},i&&((i.isRatio?i.value>0:i.value>=2)?(t["".concat(e,"Step")]=i,u[e].step=Ft(i)):f=!0)),t}),{});if(f)return t;p.xStart&&!p.xStep&&p.yStart&&!p.yStep?c.push({xStart:p.xStart,xEnd:p.xEnd,y:p.yStart},{xStart:p.xStart,xEnd:p.xEnd,y:p.yEnd},{x:p.xStart,yStart:p.yStart,yEnd:p.yEnd},{x:p.xEnd,yStart:p.yStart,yEnd:p.yEnd}):c.push(p)}if(c.length){l.push(i(u,a));var h=u.corner||s.corner,g=u.side||s.side,m=u.edge||s.edge,y={gravity:u.gravity||s.gravity,base:u.base||s.base,center:"boolean"==typeof u.center?u.center:s.center,corners:"all"===h?et:h.split(" "),sides:"both"===g?nt:[g],edges:"both"===m?ot:[m]};c.forEach((function(e){["gravity","corners","sides","center","edges","base"].forEach((function(t){e[t]=y[t]})),t.push(e)}))}return t}),[]);c.length&&(r.snap=s,It(c,t.parsedSnapTargets)&&(t.parsedSnapTargets=c,n=!0))}else e.hasOwnProperty("snap")&&t.parsedSnapTargets&&(r.snap=t.parsedSnapTargets=t.snapTargets=void 0);if(e.autoScroll){var u=dt(e.autoScroll)?e.autoScroll:{target:!0===e.autoScroll?window:e.autoScroll},d={};d.target=Ht(u.target)?u.target:window,d.speed=[],(Array.isArray(u.speed)?u.speed:[u.speed]).every((function(t,e){return!!(e<=2&&ft(t))&&(d.speed[e]=t,!0)})),d.speed.length||(d.speed=rt);var f=Array.isArray(u.sensitivity)?u.sensitivity:[u.sensitivity];d.sensitivity=d.speed.map((function(t,e){return ft(f[e])?f[e]:it[e]})),["X","Y"].forEach((function(t){var e="min".concat(t),n="max".concat(t);ft(u[e])&&u[e]>=0&&(d[e]=u[e]),ft(u[n])&&u[n]>=0&&(!d[e]||u[n]>=d[e])&&(d[n]=u[n])})),It(d,r.autoScroll)&&(r.autoScroll=d,n=!0)}else e.hasOwnProperty("autoScroll")&&(r.autoScroll&&(n=!0),r.autoScroll=void 0);if(n&&Kt(t),Ht(e.handle)&&e.handle!==r.handle){r.handle&&(r.handle.style.cursor=t.orgCursor,J&&(r.handle.style[J]=t.orgUserSelect),gt.removeStartHandler(r.handle,t.pointerEventHandlerId));var p=r.handle=e.handle;t.orgCursor=p.style.cursor,Rt(p,t.orgCursor),J&&(t.orgUserSelect=p.style[J],p.style[J]="none"),gt.addStartHandler(p,t.pointerEventHandlerId)}(ft(e.zIndex)||!1===e.zIndex)&&(r.zIndex=e.zIndex,t===z&&(t.elementStyle.zIndex=!1===r.zIndex?t.orgZIndex:r.zIndex));var h,g={left:t.elementBBox.left,top:t.elementBBox.top};ft(e.left)&&e.left!==g.left&&(g.left=e.left,h=!0),ft(e.top)&&e.top!==g.top&&(g.top=e.top,h=!0),h&&Gt(t,g),["onDrag","onMove","onDragStart","onMoveStart","onDragEnd"].forEach((function(n){"function"==typeof e[n]?(r[n]=e[n],t[n]=r[n].bind(t.ins)):e.hasOwnProperty(n)&&null==e[n]&&(r[n]=t[n]=void 0)}))}var ee=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o={ins:this,options:{zIndex:9e3},disabled:!1};if(Object.defineProperty(this,"_id",{value:++mt}),o._id=this._id,pt[this._id]=o,!Ht(e)||e===U)throw new Error("This element is not accepted.");if(n){if(!dt(n))throw new Error("Invalid options.")}else n={};var r,i,a=!0;if(e instanceof SVGElement&&(r=e.ownerSVGElement)){if(!e.getBBox)throw new Error("This element is not accepted. (SVGLocatable)");if(!e.transform)throw new Error("This element is not accepted. (SVGAnimatedTransformList)");o.svgTransform=e.transform.baseVal.appendItem(r.createSVGTransform()),o.svgPoint=r.createSVGPoint();var l=e.nearestViewportElement;o.svgCtmElement=st?l.appendChild(document.createElementNS(r.namespaceURI,"rect")):l,a=!1,o.initElm=Qt,o.moveElm=Ut}else{var s=H.getName("willChange");s&&(a=!1),!n.leftTop&&K?(s&&(e.style[s]="transform"),o.initElm=qt,o.moveElm=zt):(s&&(e.style[s]="left, top"),o.initElm=Zt,o.moveElm=Vt)}o.element=function(t,e){var n=t.style;n.webkitTapHighlightColor="transparent";var o=H.getName("boxShadow"),r=window.getComputedStyle(t,"")[o];return r&&"none"!==r||(n[o]="0 0 1px transparent"),e&&K&&(n[K]="translateZ(0)"),t}(e,a),o.elementStyle=e.style,o.orgZIndex=o.elementStyle.zIndex,wt&&X(e).add(wt),o.pointerEventHandlerId=gt.regStartHandler((function(t){return n=t,!((e=o).disabled||e.onDragStart&&!1===e.onDragStart(n)||(z&&Jt(z),$t(e.options.handle),U.style.cursor=q||window.getComputedStyle(e.options.handle,"").cursor,!1!==e.options.zIndex&&(e.elementStyle.zIndex=e.options.zIndex),J&&(U.style[J]="none"),xt&&X(e.element).add(xt),z=e,V=!1,ht.left=e.elementBBox.left-(n.clientX+window.pageXOffset),ht.top=e.elementBBox.top-(n.clientY+window.pageYOffset),0));var e,n})),n.containment||(n.containment=(i=e.parentNode)&&Ht(i)?i:U),n.handle||(n.handle=e),te(o,n)}var e,n,o;return e=t,o=[{key:"draggableCursor",get:function(){return yt},set:function(t){yt!==t&&(yt=t,G=null,Object.keys(pt).forEach((function(t){var e=pt[t];e.disabled||e===z&&!1!==q||(Rt(e.options.handle,e.orgCursor),e===z&&(U.style.cursor=Z,U.style.cursor=window.getComputedStyle(e.options.handle,"").cursor))})))}},{key:"draggingCursor",get:function(){return vt},set:function(t){vt!==t&&(vt=t,q=null,z&&($t(z.options.handle),!1===q&&(Rt(z.options.handle,z.orgCursor),U.style.cursor=Z),U.style.cursor=q||window.getComputedStyle(z.options.handle,"").cursor))}},{key:"draggableClass",get:function(){return wt},set:function(t){(t=t?t+"":void 0)!==wt&&(Object.keys(pt).forEach((function(e){var n=pt[e];if(!n.disabled){var o=X(n.element);wt&&o.remove(wt),t&&o.add(t)}})),wt=t)}},{key:"draggingClass",get:function(){return xt},set:function(t){if((t=t?t+"":void 0)!==xt){if(z){var e=X(z.element);xt&&e.remove(xt),t&&e.add(t)}xt=t}}},{key:"movingClass",get:function(){return bt},set:function(t){if((t=t?t+"":void 0)!==bt){if(z&&V){var e=X(z.element);bt&&e.remove(bt),t&&e.add(t)}bt=t}}}],(n=[{key:"remove",value:function(){var t=pt[this._id];this.disabled=!0,gt.unregStartHandler(gt.removeStartHandler(t.options.handle,t.pointerEventHandlerId)),delete pt[this._id]}},{key:"setOptions",value:function(t){return dt(t)&&te(pt[this._id],t),this}},{key:"position",value:function(){return Kt(pt[this._id]),this}},{key:"disabled",get:function(){return pt[this._id].disabled},set:function(t){var e=pt[this._id];(t=!!t)!==e.disabled&&(e.disabled=t,e.disabled?(e===z&&Jt(e),e.options.handle.style.cursor=e.orgCursor,J&&(e.options.handle.style[J]=e.orgUserSelect),wt&&X(e.element).remove(wt)):(Rt(e.options.handle,e.orgCursor),J&&(e.options.handle.style[J]="none"),wt&&X(e.element).add(wt)))}},{key:"element",get:function(){return pt[this._id].element}},{key:"rect",get:function(){return Lt(pt[this._id].elementBBox)}},{key:"left",get:function(){return pt[this._id].elementBBox.left},set:function(t){te(pt[this._id],{left:t})}},{key:"top",get:function(){return pt[this._id].elementBBox.top},set:function(t){te(pt[this._id],{top:t})}},{key:"containment",get:function(){var t=pt[this._id];return t.containmentIsBBox?Xt(t.options.containment):t.options.containment},set:function(t){te(pt[this._id],{containment:t})}},{key:"snap",get:function(){return Lt(pt[this._id].options.snap)},set:function(t){te(pt[this._id],{snap:t})}},{key:"autoScroll",get:function(){return Lt(pt[this._id].options.autoScroll)},set:function(t){te(pt[this._id],{autoScroll:t})}},{key:"handle",get:function(){return pt[this._id].options.handle},set:function(t){te(pt[this._id],{handle:t})}},{key:"zIndex",get:function(){return pt[this._id].options.zIndex},set:function(t){te(pt[this._id],{zIndex:t})}},{key:"onDrag",get:function(){return pt[this._id].options.onDrag},set:function(t){te(pt[this._id],{onDrag:t})}},{key:"onMove",get:function(){return pt[this._id].options.onMove},set:function(t){te(pt[this._id],{onMove:t})}},{key:"onDragStart",get:function(){return pt[this._id].options.onDragStart},set:function(t){te(pt[this._id],{onDragStart:t})}},{key:"onMoveStart",get:function(){return pt[this._id].options.onMoveStart},set:function(t){te(pt[this._id],{onMoveStart:t})}},{key:"onDragEnd",get:function(){return pt[this._id].options.onDragEnd},set:function(t){te(pt[this._id],{onDragEnd:t})}}])&&Y(e.prototype,n),o&&Y(e,o),t}();gt.addMoveHandler(document,(function(t){if(z){var e={left:t.clientX+window.pageXOffset+ht.left,top:t.clientY+window.pageYOffset+ht.top};if(Gt(z,e,z.snapTargets?function(t){var e,n=z.snapTargets.length,o=!1,r=!1;for(e=0;e<n&&(!o||!r);e++){var i=z.snapTargets[e];(null==i.gravityXStart||t.left>=i.gravityXStart)&&(null==i.gravityXEnd||t.left<=i.gravityXEnd)&&(null==i.gravityYStart||t.top>=i.gravityYStart)&&(null==i.gravityYEnd||t.top<=i.gravityYEnd)&&(o||null==i.x||(t.left=i.x,o=!0,e=-1),r||null==i.y||(t.top=i.y,r=!0,e=-1))}return t.snapped=o||r,!z.onDrag||z.onDrag(t)}:z.onDrag)){var n={},o=z.autoScroll;if(o){var r={x:z.elementBBox.left-window.pageXOffset,y:z.elementBBox.top-window.pageYOffset};["x","y"].forEach((function(t){if(o[t]){var e=o[t].min,i=o[t].max;o[t].lines.some((function(o){return(-1===o.dir?r[t]<=o.position:r[t]>=o.position)&&(n[t]={dir:o.dir,speed:o.speed/1e3,min:e,max:i},!0)}))}}))}n.x||n.y?(St.move(o.target,n,o.isWindow?Ot:Pt),e.autoScroll=!0):St.stop(),V||(V=!0,bt&&X(z.element).add(bt),z.onMoveStart&&z.onMoveStart(e)),z.onMove&&z.onMove(e)}}}));{let t=function(){z&&Jt(z)};gt.addEndHandler(document,t),gt.addCancelHandler(document,t)}{let t=function(){Q=H.getName("transitionProperty"),K=H.getName("transform"),Z=U.style.cursor,(J=H.getName("userSelect"))&&(tt=U.style[J]);var t,e={};function n(t,e){t.initElm&&Kt(t,e)}var o=!1,r=u((function(r){o||(o=!0,z&&(n(z,r.type),gt.move(),e[z._id]=!0),clearTimeout(t),t=setTimeout((function(){var o;o=r.type,clearTimeout(t),Object.keys(pt).forEach((function(t){e[t]||n(pt[t],o)})),e={}}),200),o=!1)}));window.addEventListener("resize",r,!0),window.addEventListener("scroll",r,!0)};(U=document.body)?t():document.addEventListener("DOMContentLoaded",(function(){U=document.body,t()}),!0)}e.default=ee}]).default;function a(){0===$("#leftMenuPane").length?$.get(l.getUrl("html/leftMenu/popup.html"),(function(t){$("body").append(t)})).done((function(){const t=$("#leftMenuPane");t&&(new i(t[0]).setOptions({handle:t.find("#leftMenuPaneTitlebar .draggable")[0]}),$(".red-close").on("click",(function(){t.hide()})),t.show())})):$("#leftMenuPane").show()}const l=BF2042Portal.Plugins.getPlugin("1650e7b6-3676-4858-8c9c-95b9381b7f8c"),s=new class{constructor(t="",n=!1){e(this,"pluginName"),e(this,"showPluginName"),this.pluginName=t,this.showPluginName=n}fancyLog(t,e){t&&console.log(`${this.showPluginName?`${this.pluginName} : `:""}%c${t}`,`color: ${e}`)}info(t){this.fancyLog(t,"#26FFDF")}warn(t){this.fancyLog(t,"#F26A1B")}critical(t){this.fancyLog(t,"#FF2C10")}}(l.manifest.name),c=new CustomEvent("flyout_show_event",{detail:!0}),u=new CustomEvent("flyout_hide_event",{detail:!1});let d,f,p,h,g,m={},y=!1;function v(t){g.call(this,t),window.dispatchEvent(t?c:u)}function w(){var t;null==h&&(t="app-rules",new MutationObserver((function(t,e){h=e;for(const n of t)"childList"===n.type&&(document.getElementsByTagName("app-blockly").length||y&&(y=!1,e.disconnect(),h=void 0,s.warn("DOM recreated.... waiting to reload blockly specific plugins....")))})).observe("string"==typeof t?$(t)[0]:t,{childList:!0,subtree:!0})),y=!0}function x(){y=!1,s.info("\r\n\r\n   _____            _   _____  _             _           \r\n  / ____|          | | |  __ \\| |           (_)          \r\n | |     ___   ___ | | | |__) | |_   _  __ _ _ _ __  ___ \r\n | |    / _ \\ / _ \\| | |  ___/| | | | |/ _` | | '_ \\/ __|\r\n | |___| (_) | (_) | | | |    | | |_| | (_| | | | | \\__ \\\r\n  \\_____\\___/ \\___/|_| |_|    |_|\\__,_|\\__, |_|_| |_|___/\r\n                                        __/ |            \r\n                                       |___/             \r\n\n              Adding spice to your logic editor"),s.info("Setting Global Plugins Base variables..."),l.initializeWorkspace=function(){if(!y)try{!function(){if(s.info("Setting Blockly Plugins Base variables..."),d=_Blockly,f=d.getMainWorkspace()||void 0,f){p=_Blockly.getMainWorkspace().getBlocksByType("modBlock",!1)[0],m={},f.getToolbox().toolboxDef_.contents.forEach((t=>{"SEP"===t.kind||["SEARCH RESULTS","VARIABLES","SUBROUTINES","CONTROL ACTIONS"].includes(t.name)||t.contents.forEach((e=>{"LABEL"!==e.kind&&(t.name in m?m[t.name].push(e):m[t.name]=[e])}))}));let t=f.getFlyout();g=t.setVisible,t.setVisible=v,window.modBlock=p,window.allBlocks=m,window.mainWorkspace=f,window.Blockly=d}}(),f&&(r(),function(){s.info("Initializing left plugins menu");const t=$("app-editor-menu mat-tree");t?0===$("#cool_leftMenuButton").length?$.get(l.getUrl("html/leftMenuButton.html"),(function(e){t.append(e)})).done((function(){const t=$("#cool_leftMenuButtonImage");t&&(t.attr("src",l.getUrl("static/images/leftMenuButton.svg")),$("#cool_leftMenuButton").on("click",a))})):s.warn("Left Menu Button already exists"):s.critical("Couldn't find root menu tree")}(),s.info("loading searchWithCategory plugin...."),$("input.searchbar").remove().clone().appendTo("span.searchbarspan").on("keyup",(function(t){setTimeout((function(){const t=window.mainWorkspace.getToolbox(),e=t.getToolboxItems()[0],n=$("input.searchbar").val().trim();if(n.length){let o=[],r=[];for(const[t,e]of Object.entries(window.allBlocks)){r=[];const i={kind:"LABEL",text:t};r.push(i),e.forEach((t=>{t.displayName.toLowerCase().includes(n.toLowerCase())&&r.push(t)})),r.length>1&&(o=o.concat(r))}e.updateFlyoutContents(o),e.show(),t.setSelectedItem(e)}else e.hide()}))}))),w()}catch(t){s.critical("Failed loading plugin... "+t)}},s.info("coolnesss loaded"),window.cool_plugin_loaded=!0}!function(){if(void 0===window.jQuery){const t=document.createElement("script");t.src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js",t.type="text/javascript",t.addEventListener("load",(()=>{console.log(`jQuery ${$.fn.jquery} has been loaded successfully!`),x()})),document.head.appendChild(t)}else x()}();
